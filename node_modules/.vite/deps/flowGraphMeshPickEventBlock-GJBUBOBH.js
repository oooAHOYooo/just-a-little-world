import {
  _isADescendantOf
} from "./chunk-2EXF6GXX.js";
import {
  FlowGraphEventBlock
} from "./chunk-EUWJ76PS.js";
import "./chunk-N3BSN3IY.js";
import "./chunk-PBS265F3.js";
import "./chunk-PXPKX7R3.js";
import {
  RichTypeAny,
  RichTypeNumber,
  RichTypeVector3
} from "./chunk-IJZDDSUZ.js";
import {
  PointerEventTypes
} from "./chunk-AA2KBVV3.js";
import "./chunk-7XY2OFQB.js";
import "./chunk-VWYU3MYC.js";
import "./chunk-26P4SUW4.js";
import "./chunk-WKWWW4WR.js";
import "./chunk-AQLPQ2Z4.js";
import {
  RegisterClass
} from "./chunk-4LFNXJGH.js";
import "./chunk-7CR247C6.js";
import "./chunk-PZ5AY32C.js";

// node_modules/@babylonjs/core/FlowGraph/Blocks/Event/flowGraphMeshPickEventBlock.js
var FlowGraphMeshPickEventBlock = class extends FlowGraphEventBlock {
  constructor(config) {
    super(config);
    this.config = config;
    this.type = "MeshPick";
    this.asset = this.registerDataInput("asset", RichTypeAny, config == null ? void 0 : config.targetMesh);
    this.pickedPoint = this.registerDataOutput("pickedPoint", RichTypeVector3);
    this.pickOrigin = this.registerDataOutput("pickOrigin", RichTypeVector3);
    this.pointerId = this.registerDataOutput("pointerId", RichTypeNumber);
    this.pickedMesh = this.registerDataOutput("pickedMesh", RichTypeAny);
    this.pointerType = this.registerDataInput("pointerType", RichTypeAny, PointerEventTypes.POINTERPICK);
  }
  _getReferencedMesh(context) {
    return this.asset.getValue(context);
  }
  _executeEvent(context, pickedInfo) {
    var _a, _b, _c, _d, _e;
    const pointerType = this.pointerType.getValue(context);
    if (pointerType !== pickedInfo.type) {
      return true;
    }
    const mesh = this._getReferencedMesh(context);
    if (mesh && ((_a = pickedInfo.pickInfo) == null ? void 0 : _a.pickedMesh) && (((_b = pickedInfo.pickInfo) == null ? void 0 : _b.pickedMesh) === mesh || _isADescendantOf((_c = pickedInfo.pickInfo) == null ? void 0 : _c.pickedMesh, mesh))) {
      this.pointerId.setValue(pickedInfo.event.pointerId, context);
      this.pickOrigin.setValue((_d = pickedInfo.pickInfo.ray) == null ? void 0 : _d.origin, context);
      this.pickedPoint.setValue(pickedInfo.pickInfo.pickedPoint, context);
      this.pickedMesh.setValue(pickedInfo.pickInfo.pickedMesh, context);
      this._execute(context);
      return !((_e = this.config) == null ? void 0 : _e.stopPropagation);
    } else {
      this.pointerId.resetToDefaultValue(context);
      this.pickOrigin.resetToDefaultValue(context);
      this.pickedPoint.resetToDefaultValue(context);
      this.pickedMesh.resetToDefaultValue(context);
    }
    return true;
  }
  /**
   * @internal
   */
  _preparePendingTasks(_context) {
  }
  /**
   * @internal
   */
  _cancelPendingTasks(_context) {
  }
  /**
   * @returns class name of the block.
   */
  getClassName() {
    return "FlowGraphMeshPickEventBlock";
  }
};
RegisterClass("FlowGraphMeshPickEventBlock", FlowGraphMeshPickEventBlock);
export {
  FlowGraphMeshPickEventBlock
};
//# sourceMappingURL=flowGraphMeshPickEventBlock-GJBUBOBH.js.map
